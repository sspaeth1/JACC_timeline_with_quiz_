<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../../css/quizNembed.css">
    <title>quiz</title>
</head>
<body>


<div id="quiz">
    <ul class="questions">
    </ul>

</div>
<div id="answer"></div>

<script>

let quiz1 = [{"quizNumber": 2},
            {"question": "What do you think is happening?"},
             {"choices":[
                "A: COVID pneumonitis",
                "B: Another cause of sepsis",
                "C: Thromboembolic disease"
                ]},
            {"answers":[
                    "Our priority was indeed to exclude COVID, as we know it can also be highly thrombogenic. However, PCR for COVID was negative; therefore, we were searching for another source.",
                    "Correct. The patient has Staphylococcus Aureus bacteremia.",
                    "Are you sure? This wouldnâ€™t explain CXR presentation or the subdural hemorrhages."
                    ]},
            {"correctAnswer": [1]}];

    let Qtag = "h2"

    let createQuestion = (quizQuestion) => {
        let grabQuiz = document.getElementById("quiz");
        let addQ = document.createElement(Qtag);
        addQ.innerHTML = quizQuestion;
        grabQuiz.appendChild(addQ);

    }

    let createChoices = (quizChoices, quizData) =>{
        let grabQuiz = document.getElementById("quiz");
        for( i=0; i < quizChoices.length; i++){
            let questionAdd = document.createElement("li");
            questionAdd.className += "qStyle";
            questionAdd.setAttribute("data", quizData[0].quizNumber + "_" + i);
            grabQuiz.appendChild(questionAdd);
             questionAdd.innerHTML = quizChoices[i]
        }
        let questions = document.getElementsByClassName("qStyle");
            for( i=0; i< questions.length; i++){
                
                questions[i].addEventListener('click', el =>{
                    let answerResponse = document.getElementById('answer');
                    let indexValue = el.target.getAttribute('data').slice(-1) //get index of whay you clicked on
                    answerResponse.id = "answer";
                    answerResponse.innerHTML = quizData[3].answers[indexValue];
                        if(quizData[4].correctAnswer.includes(parseInt(indexValue))){
                            answerResponse.className = "answerResponseCorrect";
                        }else{
                            answerResponse.className = "answerResponseWrong";
                        }
                
        }
     )
    }
    
    }

    // createQuestion(quiz1[1].question);
    createChoices(quiz1[2].choices, quiz1);  //populate the questions, correct choice

</script>



</body>
</html>